{% extends '_base.html' %}

{% load static %}
{% load crispy_forms_tags %}

{% block title %}Create Music Item{% endblock %}

{% block content %}

    <h2 class="text-2xl font-bold mb-4">Create Music Item</h2>
    <form method="post">
        {% csrf_token %}
    
        <h3 class="text-xl font-semibold mt-4">ABC Notation</h3>
    
        {{ text_form.name|as_crispy_field }}  <!-- Renderiza el campo "name" -->
        {{ text_form.tags|as_crispy_field }}  <!-- Renderiza el campo "tags" -->
        {{ text_form.category|as_crispy_field }}  <!-- Renderiza el campo "category" -->
        
        <label for="id_content" class="block text-sm font-medium text-gray-700">ABC Notation:</label>
        <textarea id="id_content" name="content" rows="10" class="shadow-sm focus:ring-indigo-500 focus:border-indigo-500 mt-1 block w-full sm:text-sm border-gray-300 rounded-md">{{ text_form.instance.content }}</textarea>
        
        <div id="paper"></div>
        
        <button type="submit" class="bg-blue-500 text-white font-bold py-2 px-4 rounded mt-4">Create</button>
    </form>
    
    <script>
        window.onload = function() {
            abc_editor = new ABCJS.Editor("id_content", { 
                canvas_id: "paper", 
                warnings_id:"warnings" 
            });
        }
    </script>
    
{% endblock content %}
