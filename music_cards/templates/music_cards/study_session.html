{% extends "music_cards/base.html" %}

{% block content %}

<div class="container mx-auto p-6">
    <div class="flex flex-col lg:flex-row gap-6">
        <!-- Main content -->
        <div class="flex-1">
            <div class="card bg-base-100 shadow-xl">
                <div class="card-body">
                    <h2 class="card-title text-3xl mb-4">
                        <i class="fas fa-play-circle text-primary mr-2"></i>
                        Sesión de Estudio
                    </h2>
                    <div class="stats shadow mb-6">
                        <div class="stat">
                            <div class="stat-title">Sesión ID</div>
                            <div class="stat-value text-primary">{{ study_session.id }}</div>
                        </div>
                        <div class="stat">
                            <div class="stat-title">Items para estudiar</div>
                            <div class="stat-value text-secondary">{{ user_reviews|length }}</div>
                        </div>
                    </div>
                    
                    <div class="alert alert-info">
                        <i class="fas fa-info-circle"></i>
                        <span>Selecciona un item de la lista lateral para comenzar a estudiar</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Sidebar -->
        <div class="w-full lg:w-80">
            <div class="card bg-base-100 shadow-xl">
                <div class="card-body">
                    <div class="collapse collapse-arrow bg-base-200" x-data="{ isOpen: false }">
                        <input type="checkbox" x-model="isOpen" />
                        <div class="collapse-title text-xl font-medium">
                            <i class="fas fa-list mr-2"></i>
                            Items de Estudio ({{ user_reviews|length }})
                        </div>
                        <div class="collapse-content">
                            <div class="space-y-2 max-h-96 overflow-y-auto">
                                {% for review in user_reviews %}
                                <div class="card bg-base-300 shadow-sm">
                                    <div class="card-body p-3">
                                        <a href="#review_{{ review.id }}" class="link link-hover">
                                            <h4 class="font-semibold text-sm">{{ review.music_item.title }}</h4>
                                        </a>
                                        <div class="flex items-center justify-between mt-2">
                                            <div class="badge badge-outline badge-sm">
                                                Box {{ review.box }}
                                            </div>
                                            <div class="rating rating-sm">
                                                {% for i in "12345" %}
                                                    <input type="radio" class="mask mask-star-2 bg-orange-400" 
                                                           {% if forloop.counter <= review.box %}checked{% endif %} disabled />
                                                {% endfor %}
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                {% endfor %}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

{% endblock content %}
