{% extends "base.html" %}
{% load wagtailcore_tags wagtailimages_tags %}
{% load library_tags %}

{# MUSIC PILLS - Plantilla de art√≠culo de blog #}

{% block title %}{{ page.title }} - Music Pills{% endblock %}

{% block extra_css %}
<style>
    /* Custom typography styles for blog content */
    .blog-content h1 {
        font-size: 1.875rem; /* text-3xl */
        font-weight: 700; /* font-bold */
        margin-bottom: 1rem;
        margin-top: 2rem;
        color: var(--fallback-bc,oklch(var(--bc)/1));
    }
    
    .blog-content h2 {
        font-size: 1.5rem; /* text-2xl */
        font-weight: 700; /* font-bold */
        margin-bottom: 0.75rem;
        margin-top: 1.5rem;
        color: var(--fallback-bc,oklch(var(--bc)/1));
    }
    
    .blog-content h3 {
        font-size: 1.25rem; /* text-xl */
        font-weight: 600; /* font-semibold */
        margin-bottom: 0.5rem;
        margin-top: 1rem;
        color: var(--fallback-bc,oklch(var(--bc)/1));
    }
    
    .blog-content h4 {
        font-size: 1.125rem; /* text-lg */
        font-weight: 600;
        margin-bottom: 0.5rem;
        margin-top: 1rem;
        color: var(--fallback-bc,oklch(var(--bc)/1));
    }
    
    .blog-content p {
        font-size: 1rem;
        line-height: 1.625;
        margin-bottom: 1rem;
        color: var(--fallback-bc,oklch(var(--bc)/0.8));
    }
    
    .blog-content ul, .blog-content ol {
        margin-bottom: 1rem;
        padding-left: 1.5rem;
    }
    
    .blog-content li {
        margin-bottom: 0.25rem;
        color: var(--fallback-bc,oklch(var(--bc)/0.8));
    }
    
    .blog-content strong {
        font-weight: 700;
        color: var(--fallback-bc,oklch(var(--bc)/1));
    }
    
    .blog-content em {
        font-style: italic;
    }
    
    .blog-content a {
        color: var(--fallback-p,oklch(var(--p)/1));
        text-decoration: underline;
    }
    
    .blog-content a:hover {
        color: var(--fallback-pf,oklch(var(--pf)/1));
    }
    
    .blog-content blockquote {
        border-left: 4px solid var(--fallback-p,oklch(var(--p)/1));
        padding-left: 1rem;
        margin: 1.5rem 0;
        font-style: italic;
        color: var(--fallback-bc,oklch(var(--bc)/0.7));
    }
    
    .blog-content code {
        background-color: var(--fallback-b2,oklch(var(--b2)/1));
        padding: 0.125rem 0.25rem;
        border-radius: 0.25rem;
        font-family: ui-monospace, SFMono-Regular, "SF Mono", Consolas, "Liberation Mono", Menlo, monospace;
        font-size: 0.875rem;
    }
    
    .blog-content pre {
        background-color: var(--fallback-b2,oklch(var(--b2)/1));
        padding: 1rem;
        border-radius: 0.5rem;
        overflow-x: auto;
        margin: 1rem 0;
    }
    
    .blog-content pre code {
        background-color: transparent;
        padding: 0;
    }
</style>
{% endblock %}

{% block content %}
<div class="container mx-auto px-4 py-8">
    <article class="max-w-4xl mx-auto">
        <!-- Header -->
        <header class="mb-8">
            <div class="flex flex-col lg:flex-row justify-between items-start gap-6 mb-6">
                <div class="flex-1">
                    <h1 class="text-4xl font-bold mb-4">{{ page.title }}</h1>
                    
                    <div class="flex flex-wrap items-center gap-4 mb-4">
                        {% if page.date %}
                        <div class="flex items-center gap-2 text-base-content/70">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                            </svg>
                            {{ page.date|date:"d M Y" }}
                        </div>
                        {% endif %}
                    </div>
                    
                    {% if page.intro %}
                    <p class="text-xl text-base-content/80 leading-relaxed mb-6">{{ page.intro }}</p>
                    {% endif %}
                </div>
                
                <!-- Actions -->
                {% if user.is_authenticated %}
                <div class="flex gap-2">
                    <div id="library-btn-blogpage-{{ page.pk }}">
                        {% library_button page %}
                    </div>
                    {% if user.is_staff %}
                    <a href="/cms/pages/{{ page.id }}/edit/" class="btn btn-primary">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path>
                        </svg>
                        Editar
                    </a>
                    {% endif %}
                </div>
                {% endif %}
            </div>
            
            <!-- Categories and Tags -->
            {% if page.categories.all or page.tags.all %}
            <div class="flex flex-wrap gap-2 mb-6">
                {% for category in page.categories.all %}
                <div class="badge badge-info">
                    {% if category.icon %}{{ category.icon }} {% endif %}{{ category.name }}
                </div>
                {% endfor %}
                {% for tag in page.tags.all %}
                <div class="badge badge-outline" style="{% if tag.color %}border-color: {{ tag.color }}; color: {{ tag.color }};{% endif %}">
                    üè∑Ô∏è {{ tag.name }}
                </div>
                {% endfor %}
            </div>
            {% endif %}
        </header>

        <!-- Featured Image -->
        {% if page.featured_image %}
        <div class="mb-8">
            <figure class="rounded-lg overflow-hidden shadow-lg">
                {% image page.featured_image width-800 class="w-full h-64 lg:h-96 object-cover" %}
            </figure>
        </div>
        {% endif %}

        <!-- Content -->
        {% if page.body %}
        <div class="blog-content">
            {{ page.body|richtext }}
        </div>
        {% endif %}

        <!-- Navigation -->
        <div class="flex justify-between items-center mt-12 pt-8 border-t border-base-300">
            <a href="{{ page.get_parent.get_url }}" class="btn btn-ghost">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path>
                </svg>
                Volver
            </a>
            
            <div class="text-sm text-base-content/50">
                √öltima actualizaci√≥n: {{ page.last_published_at|date:"M d, Y" }}
            </div>
        </div>
    </article>
</div>
{% endblock %}
